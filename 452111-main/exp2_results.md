# 实验2: 记忆视窗对比 (Memory Window)

## 实验配置

| 参数 | 值 |
|------|-----|
| Provider | DeepSeek |
| 重复次数 | 30 |
| 每次轮数 | 30 |
| 记忆窗口 | 5 / 10 / 20 / 全部 |
| 对手策略 | GrimTrigger |

## 实验结果汇总

### 囚徒困境 (Prisoner's Dilemma)

| Window | Payoff | Coop Rate |
|--------|--------|-----------|
| 5 | 75.9 ± 18.7 | 79.7% |
| 10 | 81.7 ± 15.0 | 89.8% |
| 20 | **86.0 ± 12.1** | **94.8%** |
| 全部 | 78.1 ± 19.4 | 84.1% |

**发现**: Window=20 表现最佳，合作率最高(94.8%)，得分最高(86.0)。全部历史反而表现下降，可能因为信息过载。

### 雪堆博弈 (Snowdrift)

| Window | Payoff | Coop Rate |
|--------|--------|-----------|
| 5 | 87.5 ± 8.2 | 97.4% |
| 10 | **90.0 ± 0.0** | **100.0%** |
| 20 | **90.0 ± 0.0** | **100.0%** |
| 全部 | **90.0 ± 0.0** | **100.0%** |

**发现**: Window≥10 时达到完美合作，雪堆博弈结构本身鼓励合作。

### 猎鹿博弈 (Stag Hunt)

| Window | Payoff | Coop Rate |
|--------|--------|-----------|
| 5 | **150.0 ± 0.0** | **100.0%** |
| 10 | **150.0 ± 0.0** | **100.0%** |
| 20 | 147.7 ± 12.6 | 98.3% |
| 全部 | **150.0 ± 0.0** | **100.0%** |

**发现**: 几乎所有窗口都达到完美合作，猎鹿博弈的协调性质使 LLM 容易维持合作。

## 异常值记录

### 囚徒困境 - 低合作率 Trials

| Window | Trial | Coop Rate | Payoff |
|--------|-------|-----------|--------|
| 5 | 14 | 30.0% | 43.0 |
| 5 | 22 | 20.0% | 37.0 |
| 5 | 27 | 23.3% | 39.0 |
| 5 | 12 | 50.0% | 55.0 |
| 10 | 12 | 56.7% | 53.0 |
| 10 | 25 | 50.0% | 49.0 |
| 10 | 29 | 50.0% | 49.0 |
| 20 | 2 | 46.7% | 50.0 |
| 20 | 16 | 53.3% | 51.0 |
| 20 | 21 | 46.7% | 50.0 |
| 全部 | 7 | 30.0% | 37.0 |
| 全部 | 24 | 20.0% | 37.0 |
| 全部 | 6/9/12/20 | 50.0% | 49.0 |
| 全部 | 26 | 46.7% | 50.0 |

### 雪堆博弈 - 异常 Trials

| Window | Trial | Coop Rate | Payoff |
|--------|-------|-----------|--------|
| 5 | 14 | 63.3% | 52.0 |
| 5 | 25 | 80.0% | 71.0 |
| 5 | 26 | 80.0% | 71.0 |

### 猎鹿博弈 - 异常 Trials

| Window | Trial | Coop Rate | Payoff |
|--------|-------|-----------|--------|
| 20 | 20 | 50.0% | 81.0 |

**观察**:
- 囚徒困境异常最多，Window=5 和 全部历史 的异常率较高
- 最低合作率出现在 Window=5 (20%) 和 全部历史 (20%)
- 雪堆和猎鹿博弈异常很少，且异常值也相对较高

## 关键结论

1. **最优窗口**: 在囚徒困境中，Window=20 表现最佳，说明适度的历史记忆优于过短或过长
2. **信息过载**: 全部历史在囚徒困境中反而表现下降，提示存在信息过载问题
3. **博弈结构影响**:
   - 囚徒困境：窗口大小影响显著
   - 其他博弈：窗口大小影响较小，因博弈结构本身倾向合作
4. **稳定性**: 雪堆、猎鹿博弈在各窗口下方差极小(≈0)，表现非常稳定

## 数据文件

- JSON: `results/{timestamp}/prisoners_dilemma/memory_window.json`
- 图表: `results/{timestamp}/prisoners_dilemma/memory_window.png`
- 详细记录: `results/{timestamp}/details/memory_window_*_rounds.json`
- CSV汇总: `results/{timestamp}/summary/memory_window.csv`
